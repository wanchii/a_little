(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ac58a"],{"18c0":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"py-3"},[e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-7 col-md-12 col-12 mb-md-3"},[e("div",{staticClass:"py-1 d-flex justify-content-between"},[e("router-link",{staticClass:"btn text-primary text-left",attrs:{to:"/cart"}},[e("i",{staticClass:"fas fa-long-arrow-alt-left"}),t._v(" 回到購物車 ")]),e("router-link",{staticClass:"passeroOne h4 text-primary font-weight-bold",attrs:{to:"/"}},[t._v(" a little ")])],1),e("div",{staticClass:"check border mt-1 p-3"},[e("nav",{attrs:{"aria-label":"breadcrumb"}},[e("ol",{staticClass:"breadcrumb  mb-4"},[e("li",{staticClass:"breadcrumb-item"},[e("router-link",{staticClass:"text-primary",attrs:{to:"/cart"}},[t._v(" 購物車 ")])],1),e("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v("訂購資訊")]),e("li",{staticClass:"breadcrumb-item next"},[t._v("付款")])])]),e("h4",[t._v("訂購資訊")]),e("validation-observer",{scopedSlots:t._u([{key:"default",fn:function(a){var s=a.invalid;return[e("form",{on:{submit:function(a){return a.preventDefault(),t.createOrder(a)}}},[e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-md-6"},[e("validation-provider",{attrs:{rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,r=a.classes;return[e("label",{attrs:{for:"inputName"}},[t._v("姓名")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.order_detail.name,expression:"order_detail.name"}],staticClass:"form-control",class:r,attrs:{type:"text",id:"inputName",name:"姓名",placeholder:"路晉"},domProps:{value:t.order_detail.name},on:{input:function(a){a.target.composing||t.$set(t.order_detail,"name",a.target.value)}}}),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),e("div",{staticClass:"form-group col-md-6"},[e("validation-provider",{attrs:{rules:"required|min:8|numeric",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,r=a.classes;return[e("label",{attrs:{for:"inputTel"}},[t._v("電話")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.order_detail.tel,expression:"order_detail.tel"}],staticClass:"form-control",class:r,attrs:{type:"tel",id:"inputTel",name:"電話"},domProps:{value:t.order_detail.tel},on:{input:function(a){a.target.composing||t.$set(t.order_detail,"tel",a.target.value)}}}),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}],null,!0)})],1)]),e("div",{staticClass:"form-group"},[e("validation-provider",{attrs:{rules:"required|email",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,r=a.classes;return[e("label",{attrs:{for:"inputEmail"}},[t._v("電子郵件")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.order_detail.email,expression:"order_detail.email"}],staticClass:"form-control",class:r,attrs:{type:"text",id:"inputEmail",placeholder:"123@123.com",name:"電子郵件"},domProps:{value:t.order_detail.email},on:{input:function(a){a.target.composing||t.$set(t.order_detail,"email",a.target.value)}}}),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),e("div",{staticClass:"form-group"},[e("validation-provider",{attrs:{rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,r=a.classes;return[e("label",{attrs:{for:"inputAddress"}},[t._v("地址")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.order_detail.address,expression:"order_detail.address"}],staticClass:"form-control",class:r,attrs:{type:"text",id:"inputAddress",placeholder:"地址",name:"地址"},domProps:{value:t.order_detail.address},on:{input:function(a){a.target.composing||t.$set(t.order_detail,"address",a.target.value)}}}),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),e("div",{staticClass:"form-group"},[e("validation-provider",{attrs:{rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors,r=a.classes;return[e("label",{staticClass:"font-weight-bold",attrs:{for:"paymentSelect"}},[t._v("購買方式")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.order_detail.payment,expression:"order_detail.payment"}],staticClass:"select-arrow form-control ",class:r,attrs:{id:"paymentSelect",name:"付款方式"},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.order_detail,"payment",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"",selected:"",disabled:"",hidden:""}},[t._v("請選擇付款方式")]),e("option",{attrs:{value:"WebATM"}},[t._v("WebATM")]),e("option",{attrs:{value:"ATM"}},[t._v("ATM")]),e("option",{attrs:{value:"Barcode"}},[t._v("Barcode")]),e("option",{attrs:{value:"Credit"}},[t._v("Credit")]),e("option",{attrs:{value:"ApplePay"}},[t._v("ApplePay")]),e("option",{attrs:{value:"GooglePay"}},[t._v("GooglePay")])]),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))])]}}],null,!0)})],1),e("div",{staticClass:"form-group"},[e("label",{staticClass:"font-weight-bold",attrs:{for:"formMessage"}},[t._v("留言")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.order_detail.message,expression:"order_detail.message"}],staticClass:"form-control",attrs:{id:"formMessage",rows:"3"},domProps:{value:t.order_detail.message},on:{input:function(a){a.target.composing||t.$set(t.order_detail,"message",a.target.value)}}})]),e("div",{staticClass:"d-flex justify-content-end"},[e("button",{staticClass:"btn btn-primary p-3 w-50",attrs:{type:"submit",disabled:s}},[t._v(" 送出表單 ")])])])]}}])})],1)]),e("div",{staticClass:"col-lg-5 col-md-12 col-12"},[e("div",{staticClass:"bg-base py-6 px-3  sticky-top",staticStyle:{"min-height":"100vh"}},[e("h3",{staticClass:"px-5"},[t._v("訂單明細")]),e("div",{staticClass:"order p-5"},[e("table",{staticClass:"table order-table"},[e("thead",t._l(t.carts,(function(a){return e("tr",{key:a.product.id+1},[e("td",[e("img",{staticClass:"table-img",attrs:{src:a.product.imageUrl[0],alt:""}})]),e("td",{staticClass:"font-weight-bold text-vcraftsman-dark"},[t._v(" "+t._s(a.product.title)+" "+t._s(a.quantity)+" ")]),e("td",{staticClass:"text-right"},[t._v(" "+t._s(t._f("currency")(a.product.price*a.quantity))+" ")])])})),0),e("tbody",[e("tr",[e("td",{attrs:{colspan:"2"}},[t._v("小計")]),e("td",{staticClass:"text-right"},[t._v("NT"+t._s(t._f("currency")(t.cartTotal)))])]),e("tr",[e("td",{attrs:{colspan:"2"}},[e("div",{staticClass:"input-group input-group-sm"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"form-control rounded-0",attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.coupon_code},on:{input:function(a){a.target.composing||(t.coupon_code=a.target.value)}}}),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-outline-secondary rounded-0",class:{disabled:""===t.coupon_code},attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.addCouponCode(a)}}},[t._v(" 套用優惠碼 "),t.isProcessing?e("i",{staticClass:"fas fa-circle-notch fa-spin"}):t._e()])])])]),t.coupon.enabled?e("td",{staticClass:"text-right text-danger"},[t._v(" "+t._s(t._f("currency")(t.discount))+" ")]):e("td",{staticClass:"text-right text-danger"},[t._v(" 0 ")])])]),e("tfoot",[e("tr",[e("td",{staticClass:"font-weight-bold ",attrs:{colspan:"2"}},[t._v("總共")]),e("td",{staticClass:"text-right font-weight-bold "},[t._v("NT"+t._s(t._f("currency")(t.countTotal)))])])])])])])])])])])},r=[],o=(e("99af"),e("4160"),e("159b"),{data:function(){return{carts:[],cartTotal:0,cartSubTotal:0,coupon_code:"",coupon:{},discount:0,order_detail:{email:"",name:"",tel:"",address:"",coupon:"",payment:"",message:""},isLoading:!1,isProcessing:!1}},created:function(){this.getCart()},computed:{countTotal:function(){return Math.ceil(this.cartTotal-this.discount)}},methods:{getCart:function(){var t=this;this.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io/api/").concat("326aaf6a-8ca5-4a46-b815-11a755b4a30c","/ec/shopping");this.$http.get(a).then((function(a){t.isLoading=!1,t.carts=a.data.data,t.cartTotal=0,t.carts.forEach((function(a){t.cartTotal+=a.product.price*a.quantity}))}))},addCouponCode:function(){var t=this,a="".concat("https://course-ec-api.hexschool.io/api/").concat("326aaf6a-8ca5-4a46-b815-11a755b4a30c","/ec/coupon/search");this.isProcessing=!0,this.discount=0,this.$http.post(a,{code:this.coupon_code}).then((function(a){t.getCart(),t.coupon=a.data.data;var e=Math.ceil(t.cartTotal*(t.coupon.percent/100));t.discount=e-t.cartTotal,t.$bus.$emit("sendCoupon",t.coupon_code),t.isProcessing=!1}))},createOrder:function(){var t=this,a="".concat("https://course-ec-api.hexschool.io/api/").concat("326aaf6a-8ca5-4a46-b815-11a755b4a30c","/ec/orders");this.$http.post(a,this.order_detail).then((function(a){a.data.data.id&&(console.log("success"),t.$router.push("/checkout_payment/".concat(a.data.data.id)))})).catch((function(){console.log("error")})),console.log("表單已送出")}}}),i=o,l=e("2877"),n=Object(l["a"])(i,s,r,!1,null,null,null);a["default"]=n.exports}}]);
//# sourceMappingURL=chunk-2d0ac58a.2ac44286.js.map