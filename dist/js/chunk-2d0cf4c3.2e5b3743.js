(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cf4c3"],{"62b3":function(t,a,s){"use strict";s.r(a);var i=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("section",{staticClass:"cart mb-md-7 mb-5"},[s("loading",{attrs:{active:t.isLoading,loader:"dots"},on:{"update:active":function(a){t.isLoading=a}}}),s("div",{staticClass:"jumbotron jumbotron-fluid mb-0",staticStyle:{"background-image":"url(https://images.pexels.com/photos/3735147/pexels-photo-3735147.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940)","background-position":"0% 10%","background-size":"cover",height:"300px"}}),s("div",{staticClass:"container"},[t.carts.length>0?s("div",{staticClass:"row justify-content-center mt-3"},[s("div",{staticClass:"col-md-10"},[s("h2",{staticClass:"text-secondary mb-3"},[t._v("購物車內容")]),s("div",{staticClass:"d-flex align-items-end bg-light py-2 mb-2"},[s("h5",{staticClass:"font-weight-bold text-primary"},[t._v("目前有 "+t._s(t.cartSubTotal)+" 筆")]),s("a",{staticClass:"btn btn-outline-danger rounded-0 ml-auto",attrs:{href:"#",type:"button"},on:{click:function(a){return a.preventDefault(),t.removeAllCart(a)}}},[t._v(" 清空購物車 ")])]),s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table cart-table"},[t._m(0),s("tbody",t._l(t.carts,(function(a){return s("tr",{key:a.product.id},[s("td",{staticClass:"align-middle text-center"},[s("button",{staticClass:"btn text-danger btn-sm",attrs:{type:"button"},on:{click:function(s){return t.removeCartItem(a.product.id,a.product.title)}}},[s("i",{staticClass:"fas fa-times"})])]),s("td",{staticClass:"align-middle"},[s("img",{staticClass:"img-detail",attrs:{src:a.product.imageUrl[0],alt:""}})]),s("td",{staticClass:"align-middle"},[t._v(t._s(a.product.title))]),s("td",{staticClass:"align-middle"},[s("div",{staticClass:"btn-group cart-btn-group",attrs:{role:"group","aria-label":"..."}},[s("button",{staticClass:"btn btn-outline-primary btn-sm",attrs:{type:"button",disabled:1==a.quantity},on:{click:function(s){return t.quantityUpdata(a.product.id,a.quantity-1)}}},[s("i",{staticClass:"fas fa-minus"})]),s("input",{directives:[{name:"model",rawName:"v-model",value:a.quantity,expression:"item.quantity"}],staticClass:"text-center border-0",attrs:{type:"text",size:"1",value:"1"},domProps:{value:a.quantity},on:{input:function(s){s.target.composing||t.$set(a,"quantity",s.target.value)}}}),s("button",{staticClass:"btn btn-outline-primary btn-sm",attrs:{type:"button"},on:{click:function(s){return t.quantityUpdata(a.product.id,a.quantity+1)}}},[s("i",{staticClass:"fas fa-plus"})])])]),s("td",{staticClass:"text-right align-middle"},[t._v(" "+t._s(t._f("currency")(a.product.price))+"/"+t._s(a.product.unit)+" ")]),s("td",{staticClass:"text-right align-middle"},[t._v(" "+t._s(a.product.price*a.quantity)+" ")])])})),0),s("tfoot",[s("tr",[s("td",{staticClass:"text-right",attrs:{colspan:"5"}},[t._v("小計")]),s("td",{staticClass:"text-right"},[t._v(t._s(t.cartTotal))])]),t.cartTotal<490?s("tr",[s("td",{staticClass:"text-right text-danger",attrs:{colspan:"6"}},[t._v("未滿490無法出貨")])]):t._e()])])]),s("div",{staticClass:"d-flex justify-content-between"},[s("router-link",{staticClass:"btn text-primary-dark font-weight-bold rounded-0 px-6 py-2",attrs:{to:"/products"}},[s("i",{staticClass:"fas fa-angle-left"}),t._v(" 繼續購物 ")]),s("router-link",{staticClass:"btn btn-primary font-weight-bold rounded-0 px-6 py-2",class:{disabled:t.cartTotal<490},attrs:{to:"/checkout_order"}},[t._v(" 結帳 ")])],1)])]):s("div",[s("div",{staticClass:"row justify-content-center align-items-center my-3"},[s("div",{staticClass:"col-lg-5 col-12"},[s("router-link",{staticClass:"text-primary-dark d-flex align-items-center justify-content-center",attrs:{to:"/products"}},[s("h4",{staticClass:"font-weight-bold mb-0"},[t._v("購物車沒有商品資料，趕快來去選購")]),s("i",{staticClass:"fas fa-long-arrow-alt-left ml-2"})])],1)])])])],1)},e=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("thead",[s("tr",[s("th"),s("th",[t._v("商品")]),s("th"),s("th",[t._v("數量")]),s("th",[t._v("單價")]),s("th",[t._v("小計")])])])}],n=(s("99af"),s("4160"),s("159b"),{data:function(){return{carts:[],cartTotal:0,cartSubTotal:0,isLoading:!1,isProcessing:!1}},components:{},created:function(){this.getCart()},methods:{getCart:function(){var t=this;this.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io/api/").concat("326aaf6a-8ca5-4a46-b815-11a755b4a30c","/ec/shopping");this.$http.get(a).then((function(a){t.isLoading=!1,t.carts=a.data.data,t.cartSubTotal=a.data.data.length,t.$bus.$emit("update-total"),t.cartTotal=0,t.carts.forEach((function(a){t.cartTotal+=a.product.price*a.quantity}))}))},removeAllCart:function(){var t=this;this.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io/api/").concat("326aaf6a-8ca5-4a46-b815-11a755b4a30c","/ec/shopping/all/product");this.$http.delete(a).then((function(){t.$toast.warning("購物車已清空",{icon:"fas fa-rocket"}),t.isLoading=!1,t.getCart()}))},removeCartItem:function(t,a){var s=this,i="".concat("https://course-ec-api.hexschool.io/api/").concat("326aaf6a-8ca5-4a46-b815-11a755b4a30c","/ec/shopping/").concat(t);this.$http.delete(i).then((function(){s.$toast.warning("".concat(a,"已刪除"),{icon:"far fa-trash-alt"}),s.getCart()}))},quantityUpdata:function(t,a){var s=this;if(!(a<=0)){this.isLoading=!0;var i="".concat("https://course-ec-api.hexschool.io/api/").concat("326aaf6a-8ca5-4a46-b815-11a755b4a30c","/ec/shopping"),e={product:t,quantity:a};this.$http.patch(i,e).then((function(){s.isLoading=!1,s.getCart()}))}}}}),c=n,o=s("2877"),r=Object(o["a"])(c,i,e,!1,null,null,null);a["default"]=r.exports}}]);
//# sourceMappingURL=chunk-2d0cf4c3.2e5b3743.js.map